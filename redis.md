 ## 布隆过滤器：（解决缓存穿透问题）
 性质：可以得出某个值肯定不在集合中 或 可能在集和中
 ### 存储结构（位图）
 ![enter description here](./images/1713238969840.png)
通过k次无偏函数hash的形式设置位图为1
![enter description here](./images/1713239341208.png)
所以如果某个值判断不存在那么一定不存在
存在误判的情况：hash函数存在冲突
### 空间计算
创建需初始化预计元素个数n以及错误率f，布隆过滤器中有算法根据这两个参数会计算出二进制数组的大小l，以及无偏hash函数的个数k
错误率越低，位数组越大，内存消耗越大
错误率越低，无偏函数越多，计算耗时越长
### 如何解决缓存穿透问题
存数据时需把key同时存入布隆过滤器中，读取数据时判断key是否存在，存在时读取

## 缓存雪崩
缓存雪崩是指大量的应用请求无法在 Redis 缓存中进行处理，紧接着，应用将大量请求发送到数据库层，导致数据库层的压力激增
### 原因一：大量数据同时过期
 #### 预防
 1. 过期时间分散，避免同时过期
 2. 不设置过期时间

#### 容灾
1. 服务降级：是指发生缓存雪崩时，针对不同的数据采取不同的处理方式。
	1. 非核心数据直接返回默认值（错误、空）
	2. 核心数据则依旧读取

### 原因二：redis实例宕机
#### 预防
高可用
#### 容灾
1. 服务熔断
2. 限流

### 缓存穿透（使用布隆过滤器）
缓存穿透是指要访问的数据既不在 Redis 缓存中，也不在数据库中，导致请求在访问缓存时，发生缓存缺失，再去访问数据库时，发现数据库中也没有要访问的数据

## 问题
### 十亿热点数据，怎么处理
一、可以使用分片，把并发分到不同片
二、服务降级：非核心服务直接返回默认结果（空）
三、限流：部分数据进入，部分数据直接返回结果



